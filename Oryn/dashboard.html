<!DOCTYPE html>

<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <title>Oryn Dashboard</title>
  <link href="https://fonts.googleapis.com/css2?family=Rubik:ital,wght@0,300..900;1,300..900&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="./styles/menu.css">
  <script src="https://unpkg.com/@supabase/supabase-js"></script>
  <script src="./scripts/config.js"></script>
</head>

<body>
  <!-- BARRA DE ÍCONES FIXA -->
  <div id="icon-bar">
    <button id="menu-toggle">☰</button>
    <div class="linhas">
      <img class="iconUser user-avatar" src="" alt="User" title="User" onclick="window.location.href='#'">
    </div>
    <img class="icon" src="./styles/icones/bussola.png" title="Dashboard"
      onclick="window.location.href='dashboard.html'">
    <img class="icon" src="./styles/icones/livro.png" title="Sistemas"
      onclick="window.location.href='sistemas/sistemas.html'">
    <img class="icon" src="./styles/icones/mapa.png" title="Tabletop"
      onclick="window.location.href='tabletop/test.html'">
    <img class="icon" src="./styles/icones/porta-logout.png" title="Sair" id="logout-icon">
  </div>

  <div id="sidebar">
    <div class="controlLarge">
      <button id="menu-toggle-closed">☰</button>
    </div>
    <div class="logo">
      <img src="./styles/imagens/5-titulo.png" alt="Oryn">
    </div>
    <div class="profile">
      <img class="user-avatar" src="" alt="User">
      <h3 id="user-name">Usuário</h3>
    </div>
    <nav>
      <!-- <a href="Triplice_Tenebrosa/Mesinha.html">Triple Triad</a> -->
      <a href="dashboard.html"> Dashboard</a>
      <a href="sistemas/sistemas.html">Sistemas</a>
      <a href="tabletop/test.html">Tabletop</a>
      <a href="#" id="logout">Sair</a>
    </nav>
  </div>

  <div id="main">
    <h1>Bem-vindo ao Oryn!</h1>
    <p>Escolha uma das seções no menu lateral para continuar.</p>
  </div>
  <script>
    const SUPABASE_URL = "https://ngehsncshjivmnqwxaqu.supabase.co";
    const SUPABASE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5nZWhzbmNzaGppdm1ucXd4YXF1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA1OTM4MzUsImV4cCI6MjA3NjE2OTgzNX0.hTEIKG6-Of5cEfKg1ejohNyWpsnCziD1P72k22AYOso";

    const { createClient } = window.supabase;
    const supabase = createClient(SUPABASE_URL, SUPABASE_KEY);

    document.addEventListener("DOMContentLoaded", async () => {
      await handleDashboardRedirect(supabase);
    });

    document.getElementById("logout").addEventListener("click", async () => {
      await supabase.auth.signOut();
      window.location.href = "index.html";
    });
  </script>
  <script type="module" src="./scripts/menuConfig.js"></script>
</body>

</html>